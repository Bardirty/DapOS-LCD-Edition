#include "screen_volume.h"
#include <Arduino.h>

uint8_t barChars[6][8] = {
  { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 }, // 0%
  { 0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10 },
  { 0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18 },
  { 0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C },
  { 0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E,0x1E },
  { 0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F }  // 100%
};

void initializeVolumeChars(LiquidCrystal_I2C &lcd) {
  for (int i = 0; i < 6; i++) {
    lcd.createChar(i, barChars[i]);
  }
}

void showVolumePanel(LiquidCrystal_I2C &lcd, int volume, int maxVolume) {
  lcd.setCursor(0, 0);
  lcd.print("  VOLUME  MODE   ");

  lcd.setCursor(2, 1);
  lcd.print("-");

  int bars = map(volume, 0, maxVolume, 0, 10);
  for (int i = 0; i < 10; i++) {
    if (i < bars)
      lcd.write(5);  // Полный
    else
      lcd.write(0);  // Пустой
  }

  lcd.print("+");
}
